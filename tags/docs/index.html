<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Andreas Offenhaeuser"><meta name=description content="Andreas' personal blog"><meta name=keywords content=blog,personal,software,architecture,node,markdown,plantuml,developer><meta name=generator content="Hugo 0.55.6"><title>docs | Andreas&#39; Blog</title><meta name=description content="docs - Andreas' personal blog"><meta itemprop=name content=docs><meta itemprop=description content="docs - Andreas' personal blog"><meta property=og:title content=docs><meta property=og:description content="docs - Andreas' personal blog"><meta property=og:image content="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?size=200"><meta property=og:url content=https://blog.anoff.io/tags/docs/><meta property=og:site_name content="Andreas' Blog"><meta property=og:type content=website><link rel=icon type=image/png href=https://blog.anoff.io/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://blog.anoff.io/favicon-16x16.png sizes=16x16><link href=/tags/docs/ rel=alternate type=application/rss+xml title="Andreas' Blog"><link href=/tags/docs/ rel=feed type=application/rss+xml title="Andreas' Blog"><link rel=stylesheet href=/sass/combined.min.52f29c7c50b8b42d07e557633ac1b4544e3f91c2f3a5bb0ab34dcd0e14b4e38e.css><link rel=stylesheet href=https://blog.anoff.io/adoc.css><link rel=stylesheet href=https://blog.anoff.io/overwrites.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css></head><body class=bilberry-hugo-theme><nav class=permanentTopNav><div class=container><ul class=topnav><li><a href=//anoff.io/ target=_self>About me</a></li><li><a href=/ target=_self>Blog</a></li><li><a href=//anoff.io/project/ target=_self>Projects</a></li><li><a href=/tags target=_self>by Tags</a></li><li><a href=//radar.anoff.io target=_blank>Tech skills</a></li><li><a href=//anoff.github.io/legal/ target=_blank>Legal</a></li></ul></div></nav><header><div class=container><div class=logo><a href=/ class=logo><img src=/avatar.png alt>
<span class=overlay><i class="fa fa-child"></i></span></a></div><div class=titles><h3 class=title><a href=/>Andreas&#39; Blog</a></h3><span class=subtitle>Adventures of a software engineer/architect</span></div><div class="toggler permanentTopNav"><i class="fa fa-bars" aria-hidden=true></i></div></div></header><div class="main container"><div class="article-wrapper u-cf"><a class=bubble href=https://blog.anoff.io/2019-05-14-antora-navigation-files/><i class="fa fa-fw fa-code"></i></a><article class="default article"><div class=featured-image><a href=https://blog.anoff.io/2019-05-14-antora-navigation-files/><img src=/assets/antora-arc42/title-3.png alt></a></div><div class=content><h3><a href=https://blog.anoff.io/2019-05-14-antora-navigation-files/>Composing navigation files in Antora using the include macro</a></h3><div class=meta><span class="date moment">2019-05-14</span>
<span class=readingTime>4 min read</span>
<span class=author><a href=/author/anoff>anoff</a></span></div><p>This third post in the series of Antora posts quickly addresses a feature I only recently discovered.
It will show you some techniques you can use to compose the navigation menu in a multi-repository, multi-module setup.
This is especially interesting if you have content spread across repositories that you want to present hierarchically in the navigation tree.</p><p><a href=https://blog.anoff.io/2019-05-14-antora-navigation-files/ class=more>Continue reading</a></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=/tags/docs>docs</a>
<a href=/tags/architecture>architecture</a></div></div></div></article></div><div class="article-wrapper u-cf"><a class=bubble href=https://blog.anoff.io/2019-05-08-asciidoc-plantuml-vscode/><i class="fa fa-fw fa-pencil"></i></a><article class="default article"><div class=featured-image><a href=https://blog.anoff.io/2019-05-08-asciidoc-plantuml-vscode/><img src=/assets/asciidoc-plantuml/title.png alt></a></div><div class=content><h3><a href=https://blog.anoff.io/2019-05-08-asciidoc-plantuml-vscode/>Preview AsciiDoc with PlantUML in VS Code</a></h3><div class=meta><span class="date moment">2019-05-08</span>
<span class=readingTime>4 min read</span>
<span class=author><a href=/author/anoff>anoff</a></span></div><p>This post is for everyone that likes to write AsciiDoc in VS Code but also wants to inline PlantUML diagrams within their docs.
In a previous post about <a href=/2018-07-31-diagrams-with-plantuml/>diagrams with PlantUML</a> I gave an intro into PlantUML and how to preview images in VS Code.
With the latest release of the asciidoctor plugin for VS Code it is possible to easily preview embedded PlantUML images within AsciiDocs.
No more need to maintain attributes in each file 🎉</p><p>Follow me on Twitter at <a href=https://twitter.com/anoff_io>@anoff_io</a> for future blog updates.
Currently I am writing mostly about <em>docs-as-code</em>.
Check <a href=/tags>my post tags</a> for other topics.</p><section class="doc-section level-1"><h2 id=_prerequisites>Prerequisites</h2><p>You should already have <a href=https://code.visualstudio.com/docs/setup/setup-overview>Visual Studio Code installed</a> on your machine.
At the time of writing this post I am using <code>v1.33.1</code> on MacOS and also verified the setup on a Windows 10 machine.</p><p>For the AsciiDoc preview to work we will use the <a href="https://marketplace.visualstudio.com/items?itemName=joaompinto.asciidoctor-vscode">AsciiDoc extension</a> that you can get by executing</p><div class=listing-block><pre class=highlight><code class=language-bash data-lang=bash>code --install-extension joaompinto.asciidoctor-vscode</code></pre></div><aside class="admonition-block note" role=note><h6 class="block-title label-only"><span class=title-label>Note:</span></h6><p>The feature we are going to use here is <a href=https://github.com/asciidoctor/asciidoctor-vscode/issues/155#event-2305465063>rather new</a> and shipped with <code>2.6.0</code> of the AsciiDoc plugin.</p></aside><p>The third thing you need is a PlantUML server.
There are multiple options:</p><div class="olist arabic"><ol class=arabic><li>use the public <a href=http://plantuml.com/plantuml>plantuml.com/plantuml</a> server</li><li>deploy your own <a href=https://github.com/plantuml/plantuml-server>plantuml-server</a></li><li>run <a href=https://hub.docker.com/r/plantuml/plantuml-server/>plantuml/plantuml-server</a> docker container on your local machine</li></ol></div><p>For test cases option 1 works fine; even if the server claims it does not store any data I would advise you to host your own server if you are working on anything professionally that is not open source.
Setting up a PlantUML server is rather easy if you are familiar with Docker, you can see an example setup in <a href=/2019-03-24-self-hosted-gitea-drone/>my blog post from march 2019</a>.
Finally the third option of running it locally within docker is great if you are on the road or sitting somewhere without WiFi.</p><aside class="admonition-block tip" role=doc-tip><h6 class="block-title label-only"><span class=title-label>Tip:</span></h6><p>Keep a list of docker images you always have pulled on <code>:latest</code> before going for trips.</p></aside><p>This post will use option 1 as it just works out of the box while following these instructions.</p></section><section class="doc-section level-1"><h2 id=_configuring_the_extension>Configuring the extension</h2><p>The <a href=https://github.com/asciidoctor/asciidoctor-vscode#options>option</a> we will use for this feature is <code>asciidoc.preview.attributes</code> that allows you to set arbitrary AsciiDoc attributes.
These attributes will be injected into the preview.
You could also set the attribute manually on each file but that is really something you do not want to do for generic configs like a server URL.
Build systems in the AsciiDoc ecosystem like <a href=//antora.org>Antora</a> allow you to set attributes during the build process (see <a href=https://github.com/anoff/antora-arc42/blob/master/playbook-remote.yml#L21>this example</a>), so having a local editor that also injects these attributes is super handy.</p><p>Under the hood the AsciiDoc VS Code extension relies on the <a href=https://github.com/asciidoctor/asciidoctor.js>javascript port of asciidoctor</a> and the <a href=https://github.com/eshepelyuk/asciidoctor-plantuml.js>asciidoctor-plantuml.js</a> extension.
This extension needs the <code>:plantuml-server-url:</code> attribute to be set in the AsciiDoc document to become active and parse PlantUML blocks.</p><p>So all you need to do in VS Code is to hop into your user settings and add the following entry</p><div class=listing-block><pre class=highlight><code class=language-javascript data-lang=javascript>"asciidoc.preview.attributes": {
  "plantuml-server-url": "http://plantuml.com/plantuml"
}</code></pre></div><section class="admonition-block warning" role=doc-notice><h6 class="block-title label-only"><span class=title-label>Warning:</span></h6><p>The downside of using the public server is that it does not offer SSL encrypted endpoints and you must weaken your VS Code security settings to preview correctly.</p></section><p>The PlantUML images are served over <code>http://</code> and you must allow your preview to include data from <em>unsafe</em> sources.
To do this open your command palette (⌘+P, ctrl+P) and enter <code>asciidoc preview security</code> and choose <em>Allow insecure content</em>.
In case you are running a local PlantUML server you may choose <em>Allow insecure local content</em>.</p><figure class=image-block><img src=/assets/asciidoc-plantuml/cmd1.png alt="command palette screenshot"><figcaption>Figure 1. opening asciidoc preview security settings</figcaption></figure><figure class=image-block><img src=/assets/asciidoc-plantuml/cmd2.png alt="command palette screenshot"><figcaption>Figure 2. allow insecure content</figcaption></figure></section><section class="doc-section level-1"><h2 id=_live_preview_asciidoc_with_embedded_plantuml>Live Preview AsciiDoc with embedded PlantUML</h2><p>To test it out just create an example file with some PlantUML content.</p><figure class=image-block><img src=/assets/asciidoc-plantuml/puml.svg alt=puml width=288 height=207><figcaption>Figure 3. This image is rendered on the fly</figcaption></figure><p>With the attribute set correctly the above code block renders as an image</p><div class=image-block><img src=/assets/asciidoc-plantuml/preview-ok.png alt="working preview"></div><div class=literal-block><pre>..without the attribute set or issues with the security settings you just see a code block</pre></div><div class=image-block><img src=/assets/asciidoc-plantuml/preview-nok.png alt="broken preview"></div><p>Hope this post helped you.
If you have any questions or know of better/alternative ways let me know via <a href=https://twitter.com/anoff_io>Twitter</a> or leave a comment 👋</p></section></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=/tags/docs>docs</a>
<a href=/tags/development>development</a></div></div></div></article></div><div class="article-wrapper u-cf"><a class=bubble href=https://blog.anoff.io/2019-04-19-antora-plantuml-customize-ui/><i class="fa fa-fw fa-code"></i></a><article class="default article"><div class=featured-image><a href=https://blog.anoff.io/2019-04-19-antora-plantuml-customize-ui/><img src=/assets/antora-puml/title.png alt></a></div><div class=content><h3><a href=https://blog.anoff.io/2019-04-19-antora-plantuml-customize-ui/>Advanced customization for Antora - PlantUML support &amp; custom UI</a></h3><div class=meta><span class="date moment">2019-04-19</span>
<span class=readingTime>5 min read</span>
<span class=author><a href=/author/anoff>anoff</a></span></div>This post will cover some slightly advanced steps for building a multi-repository Asciidoc documentation using Antora. My previous post blog.anoff.io/2019-02-15-antora-first-steps covered basics of Antora and how to migrate existing AsciiDoc files. In this post I will go through the steps of including content from another repository, building a custom UI and adding plantUML support to the (automated, dockerized) build.
plantUML supportOne of the most important things for me when it comes to software docs is the ability to show relationships and interactions using diagrams.
<a href=https://blog.anoff.io/2019-04-19-antora-plantuml-customize-ui/ class=more>Continue reading</a></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=/tags/docs>docs</a>
<a href=/tags/architecture>architecture</a></div></div></div></article></div><div class="article-wrapper u-cf"><a class=bubble href=https://blog.anoff.io/2019-02-17-hugo-render-asciidoc/><i class="fa fa-fw fa-code"></i></a><article class="default article"><div class=featured-image><a href=https://blog.anoff.io/2019-02-17-hugo-render-asciidoc/><img src=/assets/hugo-asciidoc/vladimir-kramer-145-unsplash.jpg alt></a></div><div class=content><h3><a href=https://blog.anoff.io/2019-02-17-hugo-render-asciidoc/>Get Hugo to render (nice) Asciidocs</a></h3><div class=meta><span class="date moment">2019-02-17</span>
<span class=readingTime>5 min read</span>
<span class=author><a href=/author/anoff>anoff</a></span></div>While migrating my blog from Jekyll to Hugo I went down quite a rabbit hole. While setup and migration to Hugo was a breeze, I spent a lot of time making my .adoc formatted post work with the new blog. After working through several GitHub issues I ended up manipulating the DOM with Javascript to get admonitions working. It still doesn&#8217;t feel right - but hey it works! 🤷‍♂️ This post will cover the steps I took in case I myself or anyone out there ever needs to do this again.
<a href=https://blog.anoff.io/2019-02-17-hugo-render-asciidoc/ class=more>Continue reading</a></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=/tags/development>development</a>
<a href=/tags/docs>docs</a>
<a href=/tags/web>web</a></div></div></div></article></div><div class="article-wrapper u-cf"><a class=bubble href=https://blog.anoff.io/2019-02-15-antora-first-steps/><i class="fa fa-fw fa-code"></i></a><article class="default article"><div class=featured-image><a href=https://blog.anoff.io/2019-02-15-antora-first-steps/><img src=/assets/antora-arc42/antora-arc42.png alt></a></div><div class=content><h3><a href=https://blog.anoff.io/2019-02-15-antora-first-steps/>Converting existing AsciiDoc into an Antora project</a></h3><div class=meta><span class="date moment">2019-02-15</span>
<span class=readingTime>7 min read</span>
<span class=author><a href=/author/anoff>anoff</a></span></div>After 2 years of working with the arc42 template in markdown, I spent the last few weeks learning about an asciidoc based site generator named Antora. The main reason for the interest in AsciiDoc was the fact that the limited feature set in markdown often impairs you while writing down complex things. But I had one problem; most of our documentation is scattered across multiple repositories as we try to keep the docs as close to the code as possible.
<a href=https://blog.anoff.io/2019-02-15-antora-first-steps/ class=more>Continue reading</a></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=/tags/development>development</a>
<a href=/tags/docs>docs</a>
<a href=/tags/architecture>architecture</a></div></div></div></article></div><div class="article-wrapper u-cf"><a class=bubble href=https://blog.anoff.io/2018-07-31-diagrams-with-plantuml/><i class="fa fa-fw fa-pencil"></i></a><article class="default article"><div class=content><h3><a href=https://blog.anoff.io/2018-07-31-diagrams-with-plantuml/>Markdown native diagrams with PlantUML</a></h3><div class=meta><span class="date moment">2018-07-31</span>
<span class=readingTime>9 min read</span>
<span class=author><a href=/author/anoff>anoff</a></span></div>This post covers PlantUML basics and how it can be used in GitLab or GitHub projects as well as a seamless local development environment using Visual Studio Code. I have been wanting to write this post for months. Lately I have been using PlantUML extensively at work but also in my private projects. You can see it being used in my plantbuddy and techradar projects on GitHub. Using it in different places and for various purposes I came across a bunch of issues that I want to share in this post.
<a href=https://blog.anoff.io/2018-07-31-diagrams-with-plantuml/ class=more>Continue reading</a></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=/tags/development>development</a>
<a href=/tags/gitlab>gitlab</a>
<a href=/tags/github>github</a>
<a href=/tags/docs>docs</a></div></div></div></article></div><div class=paginator></div></div><footer><div class=container><div class=right><div class=external-profiles><strong>Social media</strong>
<a href=//twitter.com/anoff_io target=_blank><i class="fa fa-twitter-adblock-proof"></i></a><a href=//github.com/anoff target=_blank><i class="fa fa-github"></i></a><a href=//linkedin.com/in/offenhaeuser/ target=_blank><i class="fa fa-linkedin"></i></a></div></div></div></footer><div class=credits><div class=container><div class=copyright><a href=//anoff.io target=_blank>&copy;
2019
by Andreas Offenhaeuser</a>
-
<a href=https://blog.anoff.io/tags/docs/index.xml>RSS</a></div><div class=author><a href=//github.com/Lednerb/bilberry-hugo-theme target=_blank>Bilberry Hugo Theme</a></div></div></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-93890295-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src=/js/externalDependencies.39c47e10e241eae2947b3fe21809c572.js integrity="md5-OcR&#43;EOJB6uKUez/iGAnFcg=="></script><script type=text/javascript src=/js/theme.ff50ae6dc1bfc220b23bf69dbb41b54e.js integrity="md5-/1CubcG/wiCyO/adu0G1Tg=="></script><script>$(".moment").each(function(){$(this).text(moment($(this).text()).locale("en").format('LL'));});$(".footnote-return sup").html("");</script><script src=https://blog.anoff.io/fix-adoc.js type=application/javascript></script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js type=application/javascript></script><script src=https://blog.anoff.io/init-cookieconsent.js type=application/javascript></script></body></html>