<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="527px" preserveAspectRatio="none" style="width:234px;height:527px;" version="1.1" viewBox="0 0 234 527" width="234px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="526.4385" style="stroke: #FFFFFF; stroke-width: 0.0;" width="233" x="0" y="0"/><ellipse cx="116.5" cy="20" fill="#000000" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke: #CC0033; stroke-width: 1.0;" width="212" x="10.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="192" x="20.5" y="71.1387">➕ kubernetes schedules a new</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="45" y="85.1074">agent pod as BatchJob</text><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke: #CC0033; stroke-width: 1.0;" width="182" x="25.5" y="117.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="162" x="35.5" y="139.0762">&#128640; agent container started</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="53.5" y="153.0449">in kubernets cluster</text><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke: #CC0033; stroke-width: 1.0;" width="186" x="23.5" y="185.875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="46.5" y="207.0137">✍️ agent registers with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="166" x="33.5" y="220.9824">Azure Pipelines agent pool</text><rect fill="#FFFFFF" height="47.9375" rx="12.5" ry="12.5" style="stroke: #CC0033; stroke-width: 1.0;" width="150" x="41.5" y="253.8125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="51.5" y="274.9512">&#129303; agent fetches next</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="73.5" y="288.9199">task in queue</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke: #CC0033; stroke-width: 1.0;" width="213" x="10" y="321.75"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="193" x="20" y="342.8887">&#127947;️‍ agent executes a single task</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke: #CC0033; stroke-width: 1.0;" width="148" x="42.5" y="375.7188"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="52.5" y="396.8574">☠️ agent shuts down</text><rect fill="#FFFFFF" height="33.9688" rx="12.5" ry="12.5" style="stroke: #CC0033; stroke-width: 1.0;" width="213" x="10" y="429.6875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="193" x="20" y="450.8262">&#129529; kubernetes removes the pod</text><ellipse cx="116.5" cy="494.6563" fill="#FFFFFF" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="116.5" cy="494.6563" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #CC0033; stroke-width: 1.5;" x1="116.5" x2="116.5" y1="30" y2="50"/><polygon fill="#CC0033" points="112.5,40,116.5,50,120.5,40,116.5,44" style="stroke: #CC0033; stroke-width: 1.0;"/><line style="stroke: #CC0033; stroke-width: 1.5;" x1="116.5" x2="116.5" y1="97.9375" y2="117.9375"/><polygon fill="#CC0033" points="112.5,107.9375,116.5,117.9375,120.5,107.9375,116.5,111.9375" style="stroke: #CC0033; stroke-width: 1.0;"/><line style="stroke: #CC0033; stroke-width: 1.5;" x1="116.5" x2="116.5" y1="165.875" y2="185.875"/><polygon fill="#CC0033" points="112.5,175.875,116.5,185.875,120.5,175.875,116.5,179.875" style="stroke: #CC0033; stroke-width: 1.0;"/><line style="stroke: #CC0033; stroke-width: 1.5;" x1="116.5" x2="116.5" y1="233.8125" y2="253.8125"/><polygon fill="#CC0033" points="112.5,243.8125,116.5,253.8125,120.5,243.8125,116.5,247.8125" style="stroke: #CC0033; stroke-width: 1.0;"/><line style="stroke: #CC0033; stroke-width: 1.5;" x1="116.5" x2="116.5" y1="301.75" y2="321.75"/><polygon fill="#CC0033" points="112.5,311.75,116.5,321.75,120.5,311.75,116.5,315.75" style="stroke: #CC0033; stroke-width: 1.0;"/><line style="stroke: #CC0033; stroke-width: 1.5;" x1="116.5" x2="116.5" y1="355.7188" y2="375.7188"/><polygon fill="#CC0033" points="112.5,365.7188,116.5,375.7188,120.5,365.7188,116.5,369.7188" style="stroke: #CC0033; stroke-width: 1.0;"/><line style="stroke: #CC0033; stroke-width: 1.5;" x1="116.5" x2="116.5" y1="409.6875" y2="429.6875"/><polygon fill="#CC0033" points="112.5,419.6875,116.5,429.6875,120.5,419.6875,116.5,423.6875" style="stroke: #CC0033; stroke-width: 1.0;"/><line style="stroke: #CC0033; stroke-width: 1.5;" x1="116.5" x2="116.5" y1="463.6563" y2="483.6563"/><polygon fill="#CC0033" points="112.5,473.6563,116.5,483.6563,120.5,473.6563,116.5,477.6563" style="stroke: #CC0033; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="134" x="13" y="513.9385">© Andreas Offenhaeuser &lt;</text><a href="https://anoff.io" target="_top" xlink:actuate="onRequest" xlink:show="new" xlink:title="https://anoff.io" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="37" x="147" y="513.9385">anoff.io</text></a><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="35" x="184" y="513.9385">&gt; 2019</text><!--
@startuml



skinparam ActivityBackgroundColor #ffffff
skinparam ActivityBorderColor #c03
skinparam ActivityBorderThickness 1
skinparam ActivityDiamondBackgroundColor #ffffff
skinparam ActivityDiamondBorderColor #c03
skinparam ActivityDiamondFontColor #000000
skinparam ActivityFontColor #000000
skinparam ActorBackgroundColor #ffffff
skinparam ActorBorderColor #c03
skinparam ActorFontColor #000000
skinparam ActorStereotypeFontColor #000000
skinparam AgentBackgroundColor #ffffff
skinparam AgentBorderColor #c03
skinparam AgentBorderThickness 1
skinparam AgentFontColor #000000
skinparam AgentStereotypeFontColor #000000
skinparam ArrowColor #c03
skinparam ArrowFontColor #000000
skinparam ArtifactBackgroundColor #ffffff
skinparam ArtifactBorderColor #c03
skinparam ArtifactFontColor #000000
skinparam ArtifactStereotypeFontColor #000000
skinparam BackgroundColor #ffffff
skinparam BiddableBackgroundColor #ffffff
skinparam BiddableBorderColor #c03
skinparam BoundaryBackgroundColor #ffffff
skinparam BoundaryBorderColor #c03
skinparam BoundaryFontColor #000000
skinparam BoundaryStereotypeFontColor #000000
skinparam CaptionFontColor #000000
skinparam CardBackgroundColor #ffffff
skinparam CardBorderColor #c03
skinparam CardBorderThickness 1
skinparam CardFontColor #000000
skinparam CardStereotypeFontColor #000000
skinparam CircledCharacterFontColor #000000
skinparam ClassAttributeFontColor #000000
skinparam ClassBackgroundColor #ffffff
skinparam ClassBorderColor #c03
skinparam ClassBorderThickness 1
skinparam ClassFontColor #000000
skinparam ClassHeaderBackgroundColor #ffffff
skinparam ClassStereotypeFontColor #000000
skinparam CloudBackgroundColor #ffffff
skinparam CloudBorderColor #c03
skinparam CloudFontColor #000000
skinparam CloudStereotypeFontColor #000000
skinparam CollectionsBackgroundColor #ffffff
skinparam CollectionsBorderColor #c03
skinparam ComponentBackgroundColor #ffffff
skinparam ComponentBorderColor #c03
skinparam ComponentBorderThickness 1
skinparam ComponentFontColor #000000
skinparam ComponentStereotypeFontColor #000000
skinparam ControlBackgroundColor #ffffff
skinparam ControlBorderColor #c03
skinparam ControlFontColor #000000
skinparam ControlStereotypeFontColor #000000
skinparam DatabaseBackgroundColor #ffffff
skinparam DatabaseBorderColor #c03
skinparam DatabaseFontColor #000000
skinparam DatabaseStereotypeFontColor #000000
skinparam DefaultFontColor #000000
skinparam DefaultTextAlignment center
skinparam DesignedBackgroundColor #ffffff
skinparam DesignedBorderColor #c03
skinparam DesignedDomainBorderThickness 1
skinparam DesignedDomainFontColor #000000
skinparam DesignedDomainStereotypeFontColor #000000
skinparam DiagramBorderColor #ffffff
skinparam DiagramBorderThickness 0
skinparam DomainBackgroundColor #ffffff
skinparam DomainBorderColor #c03
skinparam DomainBorderThickness 1
skinparam DomainFontColor #000000
skinparam DomainStereotypeFontColor #000000
skinparam EntityBackgroundColor #ffffff
skinparam EntityBorderColor #c03
skinparam EntityFontColor #000000
skinparam EntityStereotypeFontColor #000000
skinparam FileBackgroundColor #ffffff
skinparam FileBorderColor #c03
skinparam FileFontColor #000000
skinparam FileStereotypeFontColor #000000
skinparam FolderBackgroundColor #ffffff
skinparam FolderBorderColor #c03
skinparam FolderFontColor #000000
skinparam FolderStereotypeFontColor #000000
skinparam FooterFontColor #333
skinparam FrameBackgroundColor #ffffff
skinparam FrameBorderColor #c03
skinparam FrameFontColor #000000
skinparam FrameStereotypeFontColor #000000
skinparam HeaderFontColor #000000
skinparam IconPackageBackgroundColor #ffffff
skinparam IconPrivateBackgroundColor #ffffff
skinparam IconProtectedBackgroundColor #ffffff
skinparam IconPublicBackgroundColor #ffffff
skinparam InterfaceBackgroundColor #ffffff
skinparam InterfaceBorderColor #c03
skinparam InterfaceFontColor #000000
skinparam InterfaceStereotypeFontColor #000000
skinparam LegendBackgroundColor #ffffff
skinparam LegendBorderColor #c03
skinparam LegendBorderThickness 1
skinparam LegendFontColor #000000
skinparam LexicalBackgroundColor #ffffff
skinparam LexicalBorderColor #c03
skinparam MachineBackgroundColor #ffffff
skinparam MachineBorderColor #c03
skinparam MachineBorderThickness 1
skinparam MachineFontColor #000000
skinparam MachineStereotypeFontColor #000000
skinparam NodeBackgroundColor #ffffff
skinparam NodeBorderColor #c03
skinparam NodeFontColor #000000
skinparam NodeStereotypeFontColor #000000
skinparam NoteBackgroundColor #ffffff
skinparam NoteBorderColor #c03
skinparam NoteBorderThickness 1
skinparam NoteFontColor #000000
skinparam ObjectAttributeFontColor #000000
skinparam ObjectBackgroundColor #ffffff
skinparam ObjectBorderColor #c03
skinparam ObjectBorderThickness 1
skinparam ObjectFontColor #000000
skinparam ObjectStereotypeFontColor #000000
skinparam PackageBackgroundColor #ffffff
skinparam PackageBorderColor #c03
skinparam PackageBorderThickness 1
skinparam PackageFontColor #000000
skinparam PackageStereotypeFontColor #000000
skinparam PageBorderColor #c03
skinparam ParticipantBackgroundColor #ffffff
skinparam ParticipantBorderColor #c03
skinparam ParticipantFontColor #000000
skinparam PartitionBackgroundColor #ffffff
skinparam PartitionBorderColor #c03
skinparam PartitionBorderThickness 1
skinparam PartitionFontColor #000000
skinparam QueueBackgroundColor #ffffff
skinparam QueueBorderColor #c03
skinparam QueueFontColor #000000
skinparam QueueStereotypeFontColor #000000
skinparam RectangleBackgroundColor #ffffff
skinparam RectangleBorderColor #c03
skinparam RectangleBorderThickness 1
skinparam RectangleFontColor #000000
skinparam RectangleStereotypeFontColor #000000
skinparam RequirementBackgroundColor #ffffff
skinparam RequirementBorderColor #c03
skinparam RequirementBorderThickness 1
skinparam RequirementFontColor #000000
skinparam RequirementStereotypeFontColor #000000
skinparam RoundCorner 0
skinparam SequenceActorBorderThickness 1
skinparam SequenceBoxBackgroundColor #ffffff
skinparam SequenceBoxBorderColor #c03
skinparam SequenceBoxFontColor #000000
skinparam SequenceDelayFontColor #000000
skinparam SequenceDividerBackgroundColor #ffffff
skinparam SequenceDividerBorderColor #c03
skinparam SequenceDividerBorderThickness 1
skinparam SequenceDividerFontColor #000000
skinparam SequenceGroupBackgroundColor #ffffff
skinparam SequenceGroupBodyBackgroundColor #ffffff
skinparam SequenceGroupBorderColor #c03
skinparam SequenceGroupBorderThickness 1
skinparam SequenceGroupFontColor #000000
skinparam SequenceGroupHeaderFontColor #000000
skinparam SequenceLifeLineBackgroundColor #ffffff
skinparam SequenceLifeLineBorderColor #c03
skinparam SequenceLifeLineBorderThickness 1
skinparam SequenceParticipantBorderThickness 1
skinparam SequenceReferenceBackgroundColor #ffffff
skinparam SequenceReferenceBorderColor #c03
skinparam SequenceReferenceBorderThickness 1
skinparam SequenceReferenceFontColor #000000
skinparam SequenceReferenceHeaderBackgroundColor #ffffff
skinparam SequenceStereotypeFontColor #000000
skinparam SequenceTitleFontColor #000000
skinparam Shadowing false
skinparam StackBackgroundColor #ffffff
skinparam StackBorderColor #c03
skinparam StackFontColor #000000
skinparam StackStereotypeFontColor #000000
skinparam StateAttributeFontColor #000000
skinparam StateBackgroundColor #ffffff
skinparam StateBorderColor #c03
skinparam StateFontColor #000000
skinparam StereotypeABackgroundColor #ffffff
skinparam StereotypeABorderColor #c03
skinparam StereotypeCBackgroundColor #ffffff
skinparam StereotypeCBorderColor #c03
skinparam StereotypeEBackgroundColor #ffffff
skinparam StereotypeEBorderColor #c03
skinparam StereotypeIBackgroundColor #ffffff
skinparam StereotypeIBorderColor #c03
skinparam StereotypeNBackgroundColor #ffffff
skinparam StereotypeNBorderColor #c03
skinparam StorageBackgroundColor #ffffff
skinparam StorageBorderColor #c03
skinparam StorageFontColor #000000
skinparam StorageStereotypeFontColor #000000
skinparam SwimlaneBorderColor #c03
skinparam SwimlaneBorderThickness 1
skinparam SwimlaneTitleFontColor #000000
skinparam TitleBackgroundColor #ffffff
skinparam TitleBorderColor #ffffff
skinparam TitleBorderRoundCorner 0
skinparam TitleBorderThickness 1
skinparam TitleFontColor #c03
skinparam UsecaseBackgroundColor #ffffff
skinparam UsecaseBorderColor #c03
skinparam UsecaseBorderThickness 1
skinparam UsecaseFontColor #000000
skinparam UsecaseStereotypeFontColor #000000

center footer © Andreas Offenhaeuser <[[https://anoff.io anoff.io]]> 2019
start
:➕ kubernetes schedules a new
agent pod as BatchJob;
:🚀 agent container started
in kubernets cluster;
:✍️ agent registers with
Azure Pipelines agent pool;
:🤗 agent fetches next
task in queue;
:🏋️‍ agent executes a single task;
:☠️ agent shuts down;
:🧹 kubernetes removes the pod;
stop
@enduml

PlantUML version 1.2019.06(Fri May 24 17:10:25 GMT 2019)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 4.15.0-1059-azure
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>