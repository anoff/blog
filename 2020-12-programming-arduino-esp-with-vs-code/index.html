<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Andreas Offenhaeuser"><meta name=description content="Andreas' personal blog"><meta name=keywords content=blog,personal,software,architecture,node,markdown,plantuml,developer><meta name=generator content="Hugo 0.55.6"><title>Programming ESP and other Arduino compatible chips using VS Code on MacOS &vert; Andreas&#39; Blog</title><meta name=description content="Programming ESP and other Arduino compatible chips using VS Code on MacOS - Andreas' personal blog"><meta itemprop=name content="Programming ESP and other Arduino compatible chips using VS Code on MacOS"><meta itemprop=description content="Programming ESP and other Arduino compatible chips using VS Code on MacOS - Andreas' personal blog"><meta property=og:title content="Programming ESP and other Arduino compatible chips using VS Code on MacOS"><meta property=og:description content="Programming ESP and other Arduino compatible chips using VS Code on MacOS - Andreas' personal blog"><meta property=og:image content=https://blog.anoff.io/assets/code-arduino/title.png><meta property=og:url content=https://blog.anoff.io/2020-12-programming-arduino-esp-with-vs-code/><meta property=og:site_name content="Andreas' Blog"><meta property=og:type content=article><link href=/2020-12-programming-arduino-esp-with-vs-code/ rel=alternate type=application/rss+xml title="Andreas' Blog"><link href=/2020-12-programming-arduino-esp-with-vs-code/ rel=feed type=application/rss+xml title="Andreas' Blog"><link rel=stylesheet href=https://blog.anoff.io/theme.css><link rel=stylesheet href=https://blog.anoff.io/adoc.css><link rel=stylesheet href=https://blog.anoff.io/overwrites.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css></head><body class=bilberry-hugo-theme><nav class=permanentTopNav><div class=container><ul class=topnav><li><a href=//anoff.io/ target=_self>About me</a></li><li><a href=/ target=_self>Blog</a></li><li><a href=//anoff.io/project/ target=_self>Projects</a></li><li><a href=/tags target=_self>by Tags</a></li><li><a href=//radar.anoff.io target=_blank>Tech skills</a></li><li><a href=//anoff.github.io/legal/ target=_blank>Legal</a></li></ul></div></nav><header><div class=container><div class=logo><a id=siteBaseUrl href=/ class=logo><img src=/avatar.png alt>
<span class=overlay><i class="fa fa-child"></i></span></a></div><div class=titles><h3 class=title><a href=/>Andreas&#39; Blog</a></h3><span class=subtitle>Adventures of a software engineer/architect</span></div><div class="toggler permanentTopNav"><i class="fa fa-bars" aria-hidden=true></i></div></div></header><div class="main container"><div class="article-wrapper u-cf single"><a class=bubble href=https://blog.anoff.io/2020-12-programming-arduino-esp-with-vs-code/><i class="fas fa-fw fa-code"></i></a><article class="default article"><div class=featured-image><a href=https://blog.anoff.io/2020-12-programming-arduino-esp-with-vs-code/><img src=/assets/code-arduino/title.png alt></a></div><div class=content><h1 class=article-title><a href=https://blog.anoff.io/2020-12-programming-arduino-esp-with-vs-code/>Programming ESP and other Arduino compatible chips using VS Code on MacOS</a></h1><div class=meta><span class="date moment">2020-12-28</span>
<span class=readingTime>4 min read</span>
<span class=author><a href=https://blog.anoff.io/author/anoff/>anoff</a></span></div><p>If you are used to an IDE you want to use it as much as possible
For me that IDE has been Visual Studio Code for quite a while now.
When you are developing microcontroller based projects as a hobbyist you often end up with the Arduino ecosystem and might be tempted to use their IDE.
This post will explain how you can develop, program &amp; debug Arduino compatible devices using VS Code.
Even though this post is written with a MacOS walk-through it should be valid for other operation systems as well.</p><ul><li><a href=#installation>Installation</a></li><li><a href=#configure-your-vs-code-setup>Configure your VS Code Setup</a><ul><li><a href=#install-esp8266-drivers-for-arduino-ide>Install ESP8266 drivers for Arduino IDE</a></li><li><a href=#connecting-your-board>Connecting your Board</a></li><li><a href=#select-programmer>Select Programmer</a></li><li><a href=#select-board-type>Select Board Type</a></li></ul></li><li><a href=#writing-your-arduino-sketch-in-vs-code>Writing your Arduino Sketch in VS Code</a></li><li><a href=#programming-your-device-upload-a-sketch>Programming your device (Upload a sketch)</a></li><li><a href=#preventing-arduino-ide-splash-screen-showing-up-when-uploading>Preventing Arduino IDE splash screen showing up when uploading</a></li><li><a href=#debugging>Debugging</a></li></ul><h2 id=installation>Installation</h2><p>There are two things you need to have installed:</p><ol><li><a href=https://code.visualstudio.com/>VS Code</a></li><li><a href=https://www.arduino.cc/en/software>Arduino IDE</a></li></ol><p>Now you need to install the <a href="https://marketplace.visualstudio.com/items?itemName=vsciot-vscode.vscode-arduino"><code>vsciot-vscode.vscode-arduino</code></a> extension for VS Code.
As you can see from the extension page it comes with most features that you need:</p><ul><li>code syntax highlighting and auto completion for <code>.ino</code> files</li><li>programming the microcontroller straight from VS Code</li><li>install Arduino libraries</li><li>debugging integration into VS Code</li></ul><h2 id=configure-your-vs-code-setup>Configure your VS Code Setup</h2><p>After installing the extension you should see the following additional information in your VS Code status bar interface on the bottom.
<img src=assets/arduino-code/status-bar.png alt="Status bar showing Programmer, Board Type and COM Port"></p><h3 id=install-esp8266-drivers-for-arduino-ide>Install ESP8266 drivers for Arduino IDE</h3><p>If you work with a native Arduino device you can skip this chapter.
The Arduino IDE natively brings support for all Arduino-family devices.
The ESP8266 is a very popular IoT chip as it offers WiFi capability for less than $10, but it is not an Arduino device.</p><p>To bring support for the ESP8266 chip into Arduino IDE (and VS Code) you need to install <a href=https://github.com/esp8266/Arduino#installing-with-boards-manager>special drivers</a>.</p><p>First you need to add the ESP8266 Arduino Core to the list of <strong>additional URLs</strong> in the Arduino Board manager.
Open your VS Code settings (<code>⌘+,</code>) and edit the <code>arduino.additionalUrls</code> setting, by adding the URL of the ESP8266 Arduino Core package.</p><pre><code class=language-javascript>  &quot;arduino.additionalUrls&quot;: [
      &quot;https://arduino.esp8266.com/stable/package_esp8266com_index.json&quot;
  ]
</code></pre><p>Next we need to install this package, bring up the board manager using the command palette (<code>⌘+Shift+P</code>, <code>ctrl+Shift+P</code>) <code>&gt; Arduino Board Manager</code>, search for ESP and click install on the <code>esp8266 by ESP8266 Community</code> package.</p><p><img src=assets/arduino-code/board-manager.png alt="Arduino Board Manager"></p><p>While the package is installed you might see the Arduino IDE splash screen pop up</p><p><img src=assets/arduino-code/splash-screen.png alt="Arduino IDE Splash Screen"></p><p>The installation progress can be tracked in the VS Code output panel which should finally give you a success message after download &amp; install.</p><p><img src=assets/arduino-code/board-install-progress.png alt="VS Code showing installation progress"></p><h3 id=connecting-your-board>Connecting your Board</h3><p>For the following steps make sure your Microcontroller board is connected to your computer.
After connecting the board VS Code might automatically open up a list of examples to choose from and the Readme of the ESP8266 Arduino package.</p><p><img src=assets/arduino-code/code-examples.png alt="VS Code showing Arduino Examples"></p><p>You may choose the <strong>Blink</strong> example for testing your setup.</p><h3 id=select-programmer>Select Programmer</h3><p>Open the command palette (<code>⌘+Shift+P</code>, <code>ctrl+Shift+P</code>) again and this time navigate to <code>&gt; Arduino Select Programmer</code>, there choose <code>AVR ISP</code></p><h3 id=select-board-type>Select Board Type</h3><p>Do the same thing for selecting your board type <code>&gt; Arduino Change command palette (</code>⌘+Shift+P<code>,</code>ctrl+Shift+P<code>)</code>&gt; Arduino Board Manager<code>Board Type</code>
In case of the ESP8266 I chose the <code>Generic ESP8266 Module</code>, if you know more specific which board you use please choose the appropriate entry e.g. Adafruits Feather.</p><h2 id=writing-your-arduino-sketch-in-vs-code>Writing your Arduino Sketch in VS Code</h2><p>As you can see the <code>.ino</code> files just open up in VS Code as text files and you can code away.
The extension also brings support for C++ syntax checks and auto completion.
You may notice that VS Code already shows several errors if you open an example.
This is because the Arduino IDE behaves a bit different - you might say more convenient for newcomers.</p><p><img src=assets/arduino-code/code-errors.png alt="VS Code highlighting unknown keywords in arduino sketch"></p><p>What you need to do to make the naive C++ compiler understand those commands is to add the Arduino header files in the beginning of your sketch.</p><pre><code class=language-cpp>#include&lt;Arduino.h&gt;
</code></pre><h2 id=programming-your-device-upload-a-sketch>Programming your device (Upload a sketch)</h2><p>To program your device simply click the Upload button or use the command palette <code>Arduino: Upload</code> option.</p><blockquote><p>Note: The button is only visible if you have a <code>.ino</code> file open.</p></blockquote><p><img src=assets/arduino-code/upload.png alt="Button to upload sketch"></p><h2 id=preventing-arduino-ide-splash-screen-showing-up-when-uploading>Preventing Arduino IDE splash screen showing up when uploading</h2><p>Every time you interact with the Arduino IDE its splash screen opens up and steals the focus which is very annoying if you program in fullscreen as it shifts to another desktop.
To fix this you can follow the recommendation from this <a href=https://github.com/arduino/Arduino/issues/1970#issuecomment-587101789>issue #1970</a> which is slightly modifying the Arduino installation.
For me editing the <code>Applications/Arduino.app/Contents/Info.plist</code> did the trick by simply removing the following line and saving the file.</p><pre><code class=language-xml>L87: &lt;string&gt;-splash:$APP_ROOT/Contents/Java/lib/splash.png&lt;/string&gt;
</code></pre><p>With this line gone no more popups when programming or verifying your installation!</p><h2 id=debugging>Debugging</h2><p>For debugging there is a great tutorial on the Microsoft blog: <a href=https://devblogs.microsoft.com/iotdev/debug-your-arduino-code-with-visual-studio-code/>Debug your Arduino code with Visual Studio Code</a>
Note that you must have a either a board with an onboard debugger or a dedicated debugger in order for this to work.</p><p>I hope this post helped you out and I would love to hear your thoughts in the comments or via <a href=https://twitter.com/anoff_io>Twitter</a> 👋</p></div><div class=footer><div class=tags><i class="fa fa-tags"></i><div class=links><a href=https://blog.anoff.io/tags/development/>development</a>
<a href=https://blog.anoff.io/tags/arduino/>arduino</a>
<a href=https://blog.anoff.io/tags/iot/>iot</a></div></div></div></article></div><div id=comments-container><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"anoff-io"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><footer><div class=container><div class=right><div class=external-profiles><strong>Social media</strong></div></div></div></footer><div class=credits><div class=container><div class=copyright><a href=//anoff.io target=_blank>&copy;
2020
by Andreas Offenhaeuser</a></div><div class=author><a href=//github.com/Lednerb/bilberry-hugo-theme target=_blank>Bilberry Hugo Theme</a></div></div></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-93890295-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=text/javascript src=https://blog.anoff.io/theme.js></script><script src=https://blog.anoff.io/fix-adoc.js type=application/javascript></script><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js type=application/javascript></script><script src=https://blog.anoff.io/init-cookieconsent.js type=application/javascript></script></body></html>